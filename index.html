<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LADDER Prompt Builder | Oslo Innovation Workshop</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            line-height: 1.6;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: white;
            padding: 30px 40px;
            text-align: center;
            position: relative;
        }

        .claude-badge {
            position: absolute;
            top: 20px;
            right: 30px;
            background: rgba(255,255,255,0.2);
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 0.9em;
            backdrop-filter: blur(10px);
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            font-weight: 700;
        }

        .header p {
            font-size: 1.2em;
            opacity: 0.9;
        }

        .main-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 0;
            min-height: 70vh;
        }

        .input-panel {
            padding: 40px;
            background: #f8f9fa;
            border-right: 1px solid #e9ecef;
        }

        .output-panel {
            padding: 40px;
            background: white;
            display: flex;
            flex-direction: column;
        }

        .api-setup {
            background: #fff3cd;
            border: 2px solid #ffeaa7;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 20px;
        }

        .api-setup.connected {
            background: #d4edda;
            border-color: #c3e6cb;
        }

        .api-input {
            display: flex;
            gap: 10px;
            margin-top: 10px;
        }

        .api-input input {
            flex: 1;
            padding: 8px 12px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }

        .api-btn {
            background: #2a5298;
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 5px;
            cursor: pointer;
            white-space: nowrap;
        }

        .phase-selector {
            margin-bottom: 30px;
        }

        .phase-selector h3 {
            margin-bottom: 15px;
            color: #2a5298;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .phase-progress {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 15px;
        }

        .phase-step {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 14px;
        }

        .phase-step.completed {
            background: #28a745;
            color: white;
        }

        .phase-step.current {
            background: #2a5298;
            color: white;
        }

        .phase-step.upcoming {
            background: #e9ecef;
            color: #6c757d;
        }

        .phase-buttons {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 10px;
        }

        .phase-btn {
            padding: 12px 20px;
            border: 2px solid #2a5298;
            background: white;
            color: #2a5298;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
            position: relative;
        }

        .phase-btn:hover, .phase-btn.active {
            background: #2a5298;
            color: white;
        }

        .phase-btn.completed::after {
            content: 'âœ“';
            position: absolute;
            top: -5px;
            right: -5px;
            background: #28a745;
            color: white;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
        }

        .team-setup {
            background: #e7f3ff;
            border-left: 4px solid #2a5298;
            padding: 20px;
            margin-bottom: 30px;
            border-radius: 0 8px 8px 0;
        }

        .team-setup.completed {
            background: #d4edda;
            border-left-color: #28a745;
        }

        .team-info {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        .input-group {
            margin-bottom: 25px;
        }

        .input-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #495057;
            font-size: 1.1em;
        }

        .ladder-letter {
            background: #2a5298;
            color: white;
            padding: 4px 8px;
            border-radius: 4px;
            margin-right: 8px;
            font-weight: bold;
        }

        input, textarea, select {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s ease;
        }

        input:focus, textarea:focus, select:focus {
            outline: none;
            border-color: #2a5298;
        }

        textarea {
            resize: vertical;
            min-height: 80px;
        }

        .action-buttons {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-top: 20px;
        }

        .generate-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 8px;
            font-size: 18px;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.3s ease;
        }

        .claude-btn {
            background: linear-gradient(135deg, #ff6b6b 0%, #ff8e53 100%);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 8px;
            font-size: 18px;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.3s ease;
            position: relative;
        }

        .generate-btn:hover, .claude-btn:hover {
            transform: translateY(-2px);
        }

        .claude-btn:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
        }

        .response-container {
            flex: 1;
            display: flex;
            flex-direction: column;
        }

        .response-tabs {
            display: flex;
            border-bottom: 2px solid #e9ecef;
            margin-bottom: 20px;
        }

        .response-tab {
            padding: 10px 20px;
            border: none;
            background: none;
            cursor: pointer;
            font-weight: 600;
            color: #6c757d;
            border-bottom: 3px solid transparent;
        }

        .response-tab.active {
            color: #2a5298;
            border-bottom-color: #2a5298;
        }

        .prompt-output {
            background: #f8f9fa;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            padding: 20px;
            min-height: 200px;
            font-family: 'Monaco', 'Menlo', monospace;
            font-size: 14px;
            line-height: 1.5;
            white-space: pre-wrap;
            position: relative;
            flex: 1;
        }

        .claude-response {
            background: #fff;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            padding: 20px;
            min-height: 300px;
            font-size: 14px;
            line-height: 1.6;
            white-space: pre-wrap;
            position: relative;
            flex: 1;
            display: none;
        }

        .claude-response.active {
            display: block;
        }

        .loading {
            display: flex;
            align-items: center;
            justify-content: center;
            height: 200px;
            font-style: italic;
            color: #6c757d;
        }

        .copy-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            background: #2a5298;
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 12px;
        }

        .copy-btn:hover {
            background: #1e3c72;
        }

        .prompt-quality {
            margin-top: 15px;
            padding: 10px;
            border-radius: 5px;
            font-weight: bold;
        }

        .quality-good {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }

        .quality-fair {
            background: #fff3cd;
            color: #856404;
            border: 1px solid #ffeaa7;
        }

        .quality-poor {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f1b0b7;
        }

        .tips {
            background: #e7f3ff;
            border-left: 4px solid #2a5298;
            padding: 15px;
            margin-top: 20px;
            border-radius: 0 8px 8px 0;
        }

        .tips h4 {
            color: #2a5298;
            margin-bottom: 10px;
        }

        .session-progress {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: #e9ecef;
            border-radius: 4px;
            margin-top: 10px;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 4px;
            transition: width 0.3s ease;
        }

        @media (max-width: 768px) {
            .main-content {
                grid-template-columns: 1fr;
            }
            
            .input-panel {
                border-right: none;
                border-bottom: 1px solid #e9ecef;
            }
            
            .phase-buttons {
                grid-template-columns: 1fr;
            }
            
            .team-info {
                grid-template-columns: 1fr;
            }

            .action-buttons {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="claude-badge">ðŸ¤– Powered by Claude</div>
            <h1>LADDER Prompt Builder</h1>
            <p>Oslo Innovation Workshop â€¢ Future-Back Innovation</p>
        </div>

        <div class="main-content">
            <div class="input-panel">
                <!-- API Setup -->
                <div class="api-setup" id="apiSetup">
                    <strong>ðŸ”— Claude AI Integration</strong>
                    <p>Enter your Claude API key for direct AI responses (optional)</p>
                    <div class="api-input">
                        <input type="password" id="apiKey" placeholder="sk-ant-api03-...">
                        <button class="api-btn" onclick="connectClaude()">Connect</button>
                    </div>
                </div>

                <!-- Session Progress -->
                <div class="session-progress">
                    <strong>Workshop Progress</strong>
                    <div class="phase-progress">
                        <div class="phase-step upcoming" id="step1">1</div>
                        <div class="phase-step upcoming" id="step2">2</div>
                        <div class="phase-step upcoming" id="step3">3</div>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" id="progressFill" style="width: 0%"></div>
                    </div>
                </div>

                <!-- Phase Selection -->
                <div class="phase-selector">
                    <h3>Workshop Phase</h3>
                    <div class="phase-buttons">
                        <button class="phase-btn active" data-phase="goal" data-step="1">Goal Setting</button>
                        <button class="phase-btn" data-phase="assumptions" data-step="2">Assumptions</button>
                        <button class="phase-btn" data-phase="pathways" data-step="3">Pathways</button>
                        <button class="phase-btn" data-phase="custom" data-step="0">Custom</button>
                    </div>
                </div>

                <!-- Team Setup -->
                <div class="team-setup" id="teamSetup">
                    <h4>Team Information</h4>
                    <div class="team-info">
                        <div class="input-group">
                            <label for="teamName">Team Name</label>
                            <input type="text" id="teamName" placeholder="e.g., Team Alpha" onchange="saveTeamInfo()">
                        </div>
                        <div class="input-group">
                            <label for="industry">Primary Industry</label>
                            <select id="industry" onchange="saveTeamInfo()">
                                <option value="">Select Industry</option>
                                <option value="healthcare">Healthcare</option>
                                <option value="energy">Energy</option>
                                <option value="finance">Finance</option>
                                <option value="manufacturing">Manufacturing</option>
                                <option value="technology">Technology</option>
                                <option value="education">Education</option>
                                <option value="retail">Retail</option>
                                <option value="transportation">Transportation</option>
                                <option value="agriculture">Agriculture</option>
                                <option value="other">Other</option>
                            </select>
                        </div>
                    </div>
                </div>

                <!-- LADDER Framework -->
                <div class="input-group">
                    <label for="lead"><span class="ladder-letter">L</span>LEAD - Your Goal</label>
                    <textarea id="lead" placeholder="What specific outcome are you trying to achieve?" oninput="autoSave()"></textarea>
                </div>

                <div class="input-group">
                    <label for="anchor"><span class="ladder-letter">A</span>ANCHOR - Observable Data</label>
                    <textarea id="anchor" placeholder="What facts, trends, or current state information is relevant?" oninput="autoSave()"></textarea>
                </div>

                <div class="input-group">
                    <label for="detail"><span class="ladder-letter">D</span>DETAIL - Your Reasoning</label>
                    <textarea id="detail" placeholder="What logic or reasoning led you to this approach?" oninput="autoSave()"></textarea>
                </div>

                <div class="input-group">
                    <label for="declare"><span class="ladder-letter">D</span>DECLARE - Your Assumptions</label>
                    <textarea id="declare" placeholder="What assumptions are you making?" oninput="autoSave()"></textarea>
                </div>

                <div class="input-group">
                    <label for="explain"><span class="ladder-letter">E</span>EXPLAIN - Help Needed</label>
                    <textarea id="explain" placeholder="What type of assistance do you need?" oninput="autoSave()"></textarea>
                </div>

                <div class="input-group">
                    <label for="request"><span class="ladder-letter">R</span>REQUEST - Specific Deliverables</label>
                    <textarea id="request" placeholder="What specific outputs do you want?" oninput="autoSave()"></textarea>
                </div>

                <div class="action-buttons">
                    <button class="generate-btn" onclick="generatePrompt()">Generate Prompt</button>
                    <button class="claude-btn" id="claudeBtn" onclick="sendToClaude()" disabled>Send to Claude</button>
                </div>
            </div>

            <div class="output-panel">
                <div class="response-tabs">
                    <button class="response-tab active" onclick="showTab('prompt')">Generated Prompt</button>
                    <button class="response-tab" onclick="showTab('response')">Claude Response</button>
                </div>

                <div class="response-container">
                    <div class="prompt-output" id="promptTab">
                        <button class="copy-btn" onclick="copyPrompt()">Copy</button>
                        <div id="promptText">Your LADDER prompt will appear here...</div>
                    </div>
                    
                    <div class="claude-response" id="responseTab">
                        <button class="copy-btn" onclick="copyResponse()">Copy</button>
                        <div id="claudeResponseText">Claude's response will appear here after sending prompt...</div>
                    </div>
                </div>
                
                <div id="promptQuality"></div>

                <div class="tips">
                    <h4>ðŸ’¡ Tips for Better Results</h4>
                    <ul>
                        <li><strong>Be Specific:</strong> Include numbers, dates, and concrete details</li>
                        <li><strong>Add Context:</strong> Mention your industry constraints and opportunities</li>
                        <li><strong>State Assumptions:</strong> Make your beliefs explicit for better AI responses</li>
                        <li><strong>Norwegian Context:</strong> Leverage Nordic innovation advantages in your prompts</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Global state
        let claudeApiKey = '';
        let sessionData = {
            teamName: '',
            industry: '',
            currentPhase: 'goal',
            completedPhases: [],
            responses: {}
        };

        const phaseTemplates = {
            goal: {
                lead: "Generate breakthrough innovation goals for [INDUSTRY] achievable by December 2027",
                anchor: "Current state: [current industry metrics], Recent disruptions: [3-5 examples], Technology readiness: [emerging technologies], Norwegian context: [local advantages/challenges]",
                detail: "Reasoning: Breakthrough goals typically combine 2-3 existing trends, create 10x improvements in key metrics, or fundamentally alter value chains. Norwegian innovations succeed through sustainability focus, strong institutions, and cross-sector collaboration.",
                declare: "Assumptions: Technology adoption will accelerate post-2024, regulatory frameworks will adapt to innovation, customers will pay premiums for sustainability, Norwegian advantages (trust, education, resources) remain relevant",
                explain: "Need goals that are audacious yet grounded in emerging possibilities, leveraging Norwegian strengths",
                request: "5 specific goals with format 'By December 2027, [Norwegian/Nordic industry] will achieve [specific outcome] resulting in [measurable impact] by leveraging [specific advantage]'"
            },
            assumptions: {
                lead: "Identify critical assumptions underlying this goal: '[TEAM GOAL]'",
                anchor: "Goal context: [team's goal statement], Industry dynamics: [current challenges], Historical patterns: [similar innovation attempts], Cross-industry examples: [analogous breakthroughs in other sectors]",
                detail: "Reasoning: Critical assumptions span customer behavior, technology readiness, market dynamics, competitive response, regulatory environment, organizational capabilities, and ecosystem support. Teams often miss assumptions outside their expertise or underestimate interconnected dependencies.",
                declare: "Assumptions: Teams may have industry blind spots, cognitive biases toward familiar solutions, and limited visibility into other sector patterns. Norwegian context includes specific regulatory, cultural, and market factors.",
                explain: "Need comprehensive assumption mapping revealing both obvious and hidden dependencies, with particular attention to cross-industry learnings",
                request: "(1) 15-20 testable assumptions categorized by type, (2) Dependency map showing assumption relationships, (3) 3 historical examples where similar assumptions in other industries proved false, (4) 3 Norwegian-specific assumptions to consider"
            },
            pathways: {
                lead: "Model pathways from today to achieving '[TEAM GOAL]' by December 2027",
                anchor: "Current state: [industry baseline], Critical assumptions: [team's top 5], Resource constraints: [realistic limitations], Norwegian ecosystem: [available support, partnerships, funding]",
                detail: "Reasoning: Successful innovation pathways require assumption validation sequences, milestone achievement, setback recovery, and pivot capabilities. Norwegian innovations benefit from institutional support, cross-sector collaboration, and sustainability mandates.",
                declare: "Assumptions: Multiple pathways exist, early assumptions validation enables later possibilities, external events will require adaptations, Norwegian ecosystem provides unique advantages and constraints",
                explain: "Need realistic pathway models accounting for uncertainty, learning, and Norwegian innovation ecosystem dynamics",
                request: "(1) 3 distinct pathways showing different assumption outcomes, (2) Critical decision points with pivot criteria, (3) Norwegian-specific milestones and support mechanisms, (4) Early warning signals for path adjustments"
            },
            custom: {
                lead: "",
                anchor: "",
                detail: "",
                declare: "",
                explain: "",
                request: ""
            }
        };

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            loadSessionData();
            setupEventListeners();
            loadPhaseTemplate('goal');
            updateProgress();
        });

        function setupEventListeners() {
            document.querySelectorAll('.phase-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const phase = this.dataset.phase;
                    const step = parseInt(this.dataset.step);
                    
                    // Save current phase data before switching
                    saveCurrentPhaseData();
                    
                    // Update UI
                    document.querySelectorAll('.phase-btn').forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    
                    // Load new phase
                    sessionData.currentPhase = phase;
                    loadPhaseTemplate(phase);
                    updateProgress();
                    saveSessionData();
                });
            });
        }

        function connectClaude() {
            const apiKey = document.getElementById('apiKey').value.trim();
            if (apiKey.startsWith('sk-ant-api')) {
                claudeApiKey = apiKey;
                document.getElementById('apiSetup').classList.add('connected');
                document.getElementById('apiSetup').innerHTML = '<strong>âœ… Claude Connected</strong><p>Ready to send prompts directly to Claude AI</p>';
                document.getElementById('claudeBtn').disabled = false;
            } else {
                alert('Please enter a valid Claude API key (starts with sk-ant-api)');
            }
        }

        function saveTeamInfo() {
            sessionData.teamName = document.getElementById('teamName').value;
            sessionData.industry = document.getElementById('industry').value;
            
            if (sessionData.teamName && sessionData.industry) {
                document.getElementById('teamSetup').classList.add('completed');
            }
            
            saveSessionData();
            updateProgress();
        }

        function loadPhaseTemplate(phase) {
            const template = phaseTemplates[phase];
            if (template) {
                // Substitute industry if selected
                const industry = sessionData.industry || '[INDUSTRY]';
                
                document.getElementById('lead').value = template.lead.replace(/\[INDUSTRY\]/g, industry);
                document.getElementById('anchor').value = template.anchor;
                document.getElementById('detail').value = template.detail;
                document.getElementById('declare').value = template.declare;
                document.getElementById('explain').value = template.explain;
                document.getElementById('request').value = template.request;
            }
            
            // Load saved data for this phase if it exists
            const savedData = sessionData.responses[phase];
            if (savedData && savedData.prompt) {
                const promptData = savedData.prompt;
                document.getElementById('lead').value = promptData.lead || document.getElementById('lead').value;
                document.getElementById('anchor').value = promptData.anchor || document.getElementById('anchor').value;
                document.getElementById('detail').value = promptData.detail || document.getElementById('detail').value;
                document.getElementById('declare').value = promptData.declare || document.getElementById('declare').value;
                document.getElementById('explain').value = promptData.explain || document.getElementById('explain').value;
                document.getElementById('request').value = promptData.request || document.getElementById('request').value;
            }
        }

        function saveCurrentPhaseData() {
            const currentPhase = sessionData.currentPhase;
            if (!sessionData.responses[currentPhase]) {
                sessionData.responses[currentPhase] = {};
            }
            
            sessionData.responses[currentPhase].prompt = {
                lead: document.getElementById('lead').value,
                anchor: document.getElementById('anchor').value,
                detail: document.getElementById('detail').value,
                declare: document.getElementById('declare').value,
                explain: document.getElementById('explain').value,
                request: document.getElementById('request').value
            };
        }

        function autoSave() {
            saveCurrentPhaseData();
            saveSessionData();
            assessPromptQuality();
        }

        function generatePrompt() {
            const teamName = sessionData.teamName || '[TEAM NAME]';
            const industry = sessionData.industry || '[INDUSTRY]';
            const lead = document.getElementById('lead').value;
            const anchor = document.getElementById('anchor').value;
            const detail = document.getElementById('detail').value;
            const declare = document.getElementById('declare').value;
            const explain = document.getElementById('explain').value;
            const request = document.getElementById('request').value;

            const prompt = `TEAM: ${teamName}
INDUSTRY: ${industry.toUpperCase()}
PHASE: ${sessionData.currentPhase.toUpperCase()}

LEAD: ${lead}

ANCHOR: ${anchor}

DETAIL: ${detail}

DECLARE: ${declare}

EXPLAIN: ${explain}

REQUEST: ${request}

---
Generated by LADDER Prompt Builder for Oslo Innovation Workshop`;

            document.getElementById('promptText').textContent = prompt;
            
            // Save generated prompt
            saveCurrentPhaseData();
            sessionData.responses[sessionData.currentPhase].generatedPrompt = prompt;
            saveSessionData();
            
            assessPromptQuality();
        }

        async function sendToClaude() {
            if (!claudeApiKey) {
                alert('Please connect to Claude first');
                return;
            }

            const prompt = document.getElementById('promptText').textContent;
            if (!prompt || prompt === 'Your LADDER prompt will appear here...') {
                alert('Please generate a prompt first');
                return;
            }

            // Show loading state
            document.getElementById('claudeResponseText').innerHTML = '<div class="loading">ðŸ¤– Claude is thinking...</div>';
            showTab('response');

            try {
                const response = await fetch('https://api.anthropic.com/v1/messages', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'x-api-key': claudeApiKey,
                        'anthropic-version': '2023-06-01'
                    },
                    body: JSON.stringify({
                        model: 'claude-3-sonnet-20240229',
                        max_tokens: 2000,
                        messages: [{
                            role: 'user',
                            content: prompt
                        }]
                    })
                });

                if (!response.ok) {
                    throw new Error(`API Error: ${response.status}`);
                }

                const data = await response.json();
                const claudeResponse = data.content[0].text;
                
                document.getElementById('claudeResponseText').textContent = claudeResponse;
                
                // Save response
                sessionData.responses[sessionData.currentPhase].claudeResponse = claudeResponse;
                
                // Mark phase as completed
                if (!sessionData.completedPhases.includes(sessionData.currentPhase)) {
                    sessionData.completedPhases.push(sessionData.currentPhase);
                    updateProgress();
                }
                
                saveSessionData();

            } catch (error) {
                document.getElementById('claudeResponseText').textContent = `Error: ${error.message}\n\nPlease check your API key and try again.`;
            }
        }

        function showTab(tab) {
            document.querySelectorAll('.response-tab').forEach(t => t.classList.remove('active'));
            document.querySelector(`[onclick="showTab('${tab}')"]`).classList.add('active');
            
            if (tab === 'prompt') {
                document.getElementById('promptTab').style.display = 'block';
                document.getElementById('responseTab').style.display = '