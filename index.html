<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LADDER Prompt Builder | Chock</title>
    <link rel="icon" type="image/x-icon" href="favicon.ico">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=PT+Sans+Narrow:wght@400;700&display=swap');
        
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            line-height: 1.6;
            background: #f5f5f5;
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: #000000;
            color: white;
            padding: 30px 40px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            position: relative;
        }

        .header-left {
            display: flex;
            align-items: center;
            gap: 30px;
        }

        .logo {
            width: 80px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }

        .logo img {
            width: 100%;
            height: 100%;
            object-fit: contain;
            filter: invert(1);
        }

        .header h1 {
            font-family: 'PT Sans Narrow', sans-serif;
            font-size: 2.5em;
            margin: 0;
            font-weight: 700;
            letter-spacing: 1px;
        }

        .mode-selector {
            display: flex;
            justify-content: center;
            background: #f5f5f5;
            padding: 0;
            border-bottom: 2px solid #e0e0e0;
        }

        .mode-btn {
            flex: 1;
            max-width: 300px;
            padding: 15px 30px;
            border: none;
            background: transparent;
            color: #666;
            font-size: 1.1em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: 'PT Sans Narrow', sans-serif;
            position: relative;
        }

        .mode-btn:hover {
            background: #eeeeee;
        }

        .mode-btn.active {
            color: #000;
            background: white;
            border-bottom: 3px solid #000;
        }

        .mode-description {
            background: #f0f0f0;
            padding: 20px;
            text-align: center;
            font-style: italic;
            color: #666;
            display: none;
        }

        .mode-description.active {
            display: block;
        }

        .main-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 0;
            min-height: 70vh;
        }

        .input-panel {
            padding: 40px;
            background: #fafafa;
            border-right: 1px solid #e0e0e0;
        }

        .output-panel {
            padding: 40px;
            background: white;
            display: flex;
            flex-direction: column;
        }

        .api-setup {
            background: #f5f5f5;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 20px;
        }

        .api-setup.connected {
            background: #f0f8f0;
            border-color: #4caf50;
        }

        .api-input {
            display: flex;
            gap: 10px;
            margin-top: 10px;
        }

        .api-input input {
            flex: 1;
            padding: 8px 12px;
            border: 1px solid #ccc;
            border-radius: 5px;
        }

        .api-btn {
            background: #000000;
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 5px;
            cursor: pointer;
            white-space: nowrap;
            transition: opacity 0.3s ease;
        }

        .api-btn:hover {
            opacity: 0.8;
        }

        .phase-selector {
            margin-bottom: 30px;
        }

        .phase-selector h3 {
            margin-bottom: 15px;
            color: #000000;
            display: flex;
            align-items: center;
            gap: 10px;
            font-family: 'PT Sans Narrow', sans-serif;
            font-size: 1.3em;
        }

        .phase-progress {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 15px;
        }

        .phase-step {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 14px;
        }

        .phase-step.completed {
            background: #000000;
            color: white;
        }

        .phase-step.current {
            background: #333333;
            color: white;
        }

        .phase-step.upcoming {
            background: #e0e0e0;
            color: #666666;
        }

        .phase-buttons {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 10px;
        }

        .phase-btn {
            padding: 12px 20px;
            border: 2px solid #000000;
            background: white;
            color: #000000;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
            position: relative;
        }

        .phase-btn:hover, .phase-btn.active {
            background: #000000;
            color: white;
        }

        .phase-btn.completed::after {
            content: 'âœ“';
            position: absolute;
            top: -5px;
            right: -5px;
            background: #000000;
            color: white;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
        }

        .team-setup {
            background: #f5f5f5;
            border-left: 4px solid #000000;
            padding: 20px;
            margin-bottom: 30px;
            border-radius: 0 8px 8px 0;
        }

        .team-setup.completed {
            background: #f0f8f0;
            border-left-color: #4caf50;
        }

        .team-info {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        .input-group {
            margin-bottom: 25px;
        }

        .input-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #333333;
            font-size: 1.1em;
            font-family: 'PT Sans Narrow', sans-serif;
        }

        .ladder-letter {
            background: #000000;
            color: white;
            padding: 4px 8px;
            border-radius: 4px;
            margin-right: 8px;
            font-weight: bold;
        }

        input, textarea, select {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s ease;
        }

        input:focus, textarea:focus, select:focus {
            outline: none;
            border-color: #000000;
        }

        textarea {
            resize: vertical;
            min-height: 80px;
        }

        .field-description {
            font-size: 0.85em;
            color: #666;
            margin: 5px 0 10px 0;
            line-height: 1.4;
            display: none;
        }

        .research-mode .field-description {
            display: block;
        }

        .action-buttons {
            display: flex;
            justify-content: center;
            margin-top: 20px;
        }

        .generate-btn {
            background: #000000;
            color: white;
            border: none;
            padding: 15px 40px;
            border-radius: 8px;
            font-size: 18px;
            font-weight: 600;
            cursor: pointer;
            transition: opacity 0.3s ease;
            font-family: 'PT Sans Narrow', sans-serif;
        }

        .claude-btn {
            background: #333333;
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 8px;
            font-size: 18px;
            font-weight: 600;
            cursor: pointer;
            transition: opacity 0.3s ease;
            position: relative;
            font-family: 'PT Sans Narrow', sans-serif;
        }

        .generate-btn:hover, .claude-btn:hover {
            opacity: 0.8;
        }

        .claude-btn:disabled {
            background: #cccccc;
            cursor: not-allowed;
            opacity: 0.6;
        }

        .response-container {
            flex: 1;
            display: flex;
            flex-direction: column;
        }

        .response-tabs {
            display: flex;
            border-bottom: 2px solid #e0e0e0;
            margin-bottom: 20px;
        }

        .response-tab {
            padding: 10px 20px;
            border: none;
            background: none;
            cursor: pointer;
            font-weight: 600;
            color: #666666;
            border-bottom: 3px solid transparent;
            font-family: 'PT Sans Narrow', sans-serif;
            font-size: 1.1em;
        }

        .response-tab.active {
            color: #000000;
            border-bottom-color: #000000;
        }

        .prompt-output {
            background: #fafafa;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            padding: 20px;
            min-height: 200px;
            font-family: 'Monaco', 'Menlo', monospace;
            font-size: 14px;
            line-height: 1.5;
            white-space: pre-wrap;
            position: relative;
            flex: 1;
        }

        .claude-response {
            background: #fff;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            padding: 20px;
            min-height: 300px;
            font-size: 14px;
            line-height: 1.6;
            white-space: pre-wrap;
            position: relative;
            flex: 1;
            display: none;
        }

        .claude-response.active {
            display: block;
        }

        .loading {
            display: flex;
            align-items: center;
            justify-content: center;
            height: 200px;
            font-style: italic;
            color: #666666;
        }

        .copy-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            background: #000000;
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 12px;
            transition: opacity 0.3s ease;
        }

        .copy-btn:hover {
            opacity: 0.8;
        }

        .prompt-quality {
            margin-top: 15px;
            padding: 10px;
            border-radius: 5px;
            font-weight: bold;
        }

        .quality-good {
            background: #f0f8f0;
            color: #2e7d32;
            border: 1px solid #4caf50;
        }

        .quality-fair {
            background: #fff8e1;
            color: #f57c00;
            border: 1px solid #ff9800;
        }

        .quality-poor {
            background: #ffebee;
            color: #c62828;
            border: 1px solid #f44336;
        }

        .tips {
            background: #f5f5f5;
            border-left: 4px solid #000000;
            padding: 15px;
            margin-top: 20px;
            border-radius: 0 8px 8px 0;
        }

        .tips h4 {
            color: #000000;
            margin-bottom: 10px;
            font-family: 'PT Sans Narrow', sans-serif;
            font-size: 1.2em;
        }

        .session-progress {
            background: #f5f5f5;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: #e0e0e0;
            border-radius: 4px;
            margin-top: 10px;
        }

        .progress-fill {
            height: 100%;
            background: #000000;
            border-radius: 4px;
            transition: width 0.3s ease;
        }

        .footer {
            background: #000000;
            color: white;
            text-align: center;
            padding: 20px;
            font-family: 'PT Sans Narrow', sans-serif;
        }

        .footer a {
            color: white;
            text-decoration: none;
            margin-left: 10px;
        }

        .footer a:hover {
            text-decoration: underline;
        }

        @media (max-width: 768px) {
            .main-content {
                grid-template-columns: 1fr;
            }
            
            .input-panel {
                border-right: none;
                border-bottom: 1px solid #e0e0e0;
            }
            
            .phase-buttons {
                grid-template-columns: 1fr;
            }
            
            .team-info {
                grid-template-columns: 1fr;
            }

            .action-buttons {
                grid-template-columns: 1fr;
            }

            .header-left {
                flex-direction: column;
                align-items: flex-start;
                gap: 10px;
            }

            .logo {
                width: 60px;
                height: 30px;
            }

            .header h1 {
                font-size: 1.8em;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="header-left">
                <div class="logo">
                    <svg viewBox="0 0 2029 919" style="width: 100%; height: 100%; fill: white;">
                        <g transform="matrix(1,0,0,1,-201,-198)">
                            <path d="M1168.95,386.932C1237.67,502.99 1254.13,971.656 1221.96,1020.63C1189.77,1069.59 336.639,1116.89 277.999,1029.83C214.467,935.491 289.327,371.211 383.761,260.786C478.194,150.362 1136.25,331.694 1168.95,386.932ZM1078.01,445.901C1052.58,403.022 499.499,300.884 450.836,357.502C377.266,443.109 333.177,910.835 363.217,956.576C396.119,1006.7 1094.2,975.869 1119.22,937.853C1144.23,899.837 1131.43,536.002 1078.01,445.901Z" style="fill:white;stroke:white;stroke-width:1px;"/>
                        </g>
                        <g transform="matrix(1,0,0,1,-201,-198)">
                            <path d="M1394.46,583.154C1354.11,583.154 1318.09,604.768 1298.64,641.153C1287.11,662.768 1281.7,687.624 1281.7,718.965C1281.7,755.71 1291.79,785.971 1311.96,808.666C1332.5,832.082 1359.16,843.249 1393.74,843.249C1422.2,843.249 1443.45,836.044 1463.27,819.833L1440.21,788.132C1438.41,789.573 1436.61,791.014 1435.17,792.095C1422.92,800.38 1411.03,804.343 1397.34,804.343C1375.73,804.343 1359.16,794.616 1349.07,776.244C1341.51,762.555 1338.62,743.462 1338.62,709.239C1338.62,680.059 1342.95,659.165 1352.67,644.755C1361.68,631.426 1378.25,623.141 1395.18,623.141C1409.23,623.141 1422.56,627.824 1435.17,637.19L1457.86,602.967C1444.17,591.079 1419.32,583.154 1394.46,583.154Z" style="fill:white;fill-rule:nonzero;"/>
                        </g>
                        <g transform="matrix(1,0,0,1,-201,-198)">
                            <path d="M1486.32,625.663L1486.32,838.926L1535.31,838.926L1535.31,706.717C1546.12,696.991 1561.61,689.786 1573.5,689.786C1587.19,689.786 1592.23,696.63 1592.23,715.003L1592.23,838.926L1639.42,838.926L1639.42,709.959C1639.42,689.065 1638.34,686.183 1634.74,675.736C1628.98,660.246 1609.52,649.439 1586.83,649.439C1568.1,649.439 1547.2,657.364 1534.59,669.252C1534.59,667.09 1535.31,659.525 1535.31,653.761L1535.31,617.017C1535.31,599.365 1534.23,582.073 1532.07,571.986L1482.72,583.514C1484.88,591.079 1486.32,608.371 1486.32,625.663Z" style="fill:white;fill-rule:nonzero;"/>
                        </g>
                        <g transform="matrix(1,0,0,1,-201,-198)">
                            <path d="M1672.93,747.425C1672.93,805.424 1705.71,842.889 1755.79,842.889C1784.25,842.889 1802.62,833.162 1816.67,817.312C1832.52,799.3 1839.72,777.685 1839.72,745.984C1839.72,716.083 1833.24,695.91 1818.47,678.618C1802.62,659.886 1782.08,650.88 1755.79,650.88C1706.07,650.88 1672.93,689.426 1672.93,747.425ZM1777.4,696.27C1783.88,704.556 1787.13,720.767 1787.13,745.623C1787.13,789.213 1778.12,807.945 1757.23,807.945C1747.86,807.945 1737.05,802.902 1732.73,792.815C1728.77,783.449 1726.61,767.598 1726.61,746.344C1726.61,727.972 1728.41,715.003 1731.65,705.276C1735.61,693.748 1744.98,686.544 1756.51,686.544C1765.15,686.544 1772.72,690.146 1777.4,696.27Z" style="fill:white;fill-rule:nonzero;"/>
                        </g>
                        <g transform="matrix(1,0,0,1,-201,-198)">
                            <path d="M1981.65,657.364C1971.2,652.32 1958.24,649.078 1945.99,649.078C1930.5,649.078 1912.48,654.482 1900.24,662.768C1878.62,677.538 1862.41,705.636 1862.41,748.145C1862.41,807.945 1891.95,843.249 1942.74,843.249C1960.4,843.249 1974.81,839.287 1987.78,831.721C1994.26,827.759 1997.5,825.237 2004.71,818.032L1982.73,788.853L1979.85,791.374C1967.96,801.821 1957.87,806.504 1946.71,806.504C1938.42,806.504 1930.14,802.542 1925.09,796.057C1918.61,788.132 1915.73,773.722 1915.73,749.586C1915.73,706.357 1925.45,687.624 1947.07,687.624C1956.07,687.624 1966.52,693.028 1976.25,702.034L1999.66,670.333C1991.74,663.488 1988.5,660.966 1981.65,657.364Z" style="fill:white;fill-rule:nonzero;"/>
                        </g>
                        <g transform="matrix(1,0,0,1,-201,-198)">
                            <path d="M2074.96,734.456L2136.92,838.926L2193.84,838.926L2121.43,731.574L2180.15,653.761L2122.15,653.761L2074.96,734.456ZM2025.61,631.066L2025.61,838.926L2073.88,838.926L2073.88,631.066C2073.88,606.57 2073.16,584.955 2071,571.266L2022.37,583.154C2025.25,602.247 2025.61,614.855 2025.61,631.066Z" style="fill:white;fill-rule:nonzero;"/>
                        </g>
                    </svg>
                </div>
                <h1>LADDER Prompt Builder</h1>
            </div>
            <div class="claude-badge">ðŸ¤– AI-Ready Prompts</div>
        </div>

        <!-- Mode Selector -->
        <div class="mode-selector">
            <button class="mode-btn active" onclick="switchMode('research')">Research Mode</button>
            <button class="mode-btn" onclick="switchMode('workshop')">Workshop Mode</button>
        </div>

        <div class="mode-description active" id="researchDesc">
            Create structured prompts for complex research, analysis, and problem-solving tasks using the LADDER framework
        </div>
        <div class="mode-description" id="workshopDesc">
            Innovation workshop tool for future-back thinking with guided phases: Goal Setting â†’ Assumptions â†’ Pathways
        </div>

        <div class="main-content">
            <div class="input-panel">
                <!-- Session Progress - Only for Workshop Mode -->
                <div class="session-progress" id="sessionProgress" style="display: none;">
                    <strong>Workshop Progress</strong>
                    <div class="phase-progress">
                        <div class="phase-step upcoming" id="step1">1</div>
                        <div class="phase-step upcoming" id="step2">2</div>
                        <div class="phase-step upcoming" id="step3">3</div>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" id="progressFill" style="width: 0%"></div>
                    </div>
                </div>

                <!-- Phase Selection - Only for Workshop Mode -->
                <div class="phase-selector" id="phaseSelector" style="display: none;">
                    <h3>Workshop Phase</h3>
                    <div class="phase-buttons">
                        <button class="phase-btn active" data-phase="goal" data-step="1">Goal Setting</button>
                        <button class="phase-btn" data-phase="assumptions" data-step="2">Assumptions</button>
                        <button class="phase-btn" data-phase="pathways" data-step="3">Pathways</button>
                    </div>
                </div>

                <!-- Context Setup -->
                <div class="team-setup" id="teamSetup">
                    <h4 id="contextTitle">Context Information</h4>
                    <div class="team-info">
                        <div class="input-group">
                            <label for="teamName" id="contextLabel1">Project/Team Name</label>
                            <input type="text" id="teamName" placeholder="e.g., Q1 Market Analysis" onchange="saveTeamInfo()">
                        </div>
                        <div class="input-group">
                            <label for="industry" id="contextLabel2">Domain/Industry</label>
                            <select id="industry" onchange="saveTeamInfo()">
                                <option value="">Select Domain</option>
                                <option value="healthcare">Healthcare</option>
                                <option value="energy">Energy</option>
                                <option value="finance">Finance</option>
                                <option value="manufacturing">Manufacturing</option>
                                <option value="technology">Technology</option>
                                <option value="education">Education</option>
                                <option value="retail">Retail</option>
                                <option value="transportation">Transportation</option>
                                <option value="agriculture">Agriculture</option>
                                <option value="research">Research</option>
                                <option value="consulting">Consulting</option>
                                <option value="other">Other</option>
                            </select>
                        </div>
                    </div>
                </div>

                <!-- LADDER Framework -->
                <div class="input-group">
                    <label for="lead"><span class="ladder-letter">L</span>LEAD - Your Goal</label>
                    <p class="field-description" id="leadDesc">What specific outcome are you trying to achieve? Be as precise as possible with measurable objectives.</p>
                    <textarea id="lead" placeholder="Example: Analyze customer churn patterns to reduce attrition by 25% in Q2 2025" oninput="autoSave()"></textarea>
                </div>

                <div class="input-group">
                    <label for="anchor"><span class="ladder-letter">A</span>ANCHOR - Observable Data</label>
                    <p class="field-description" id="anchorDesc">What facts, data, trends, or current state information grounds your request? Include specific metrics, sources, or observations.</p>
                    <textarea id="anchor" placeholder="Example: Current churn rate is 18% monthly, industry average is 12%, recent survey shows pricing concerns" oninput="autoSave()"></textarea>
                </div>

                <div class="input-group">
                    <label for="detail"><span class="ladder-letter">D</span>DETAIL - Your Reasoning</label>
                    <p class="field-description" id="detailDesc">What logic, methodology, or analytical approach are you considering? Explain your thought process.</p>
                    <textarea id="detail" placeholder="Example: Planning to use cohort analysis combined with predictive modeling to identify at-risk segments" oninput="autoSave()"></textarea>
                </div>

                <div class="input-group">
                    <label for="declare"><span class="ladder-letter">D</span>DECLARE - Your Assumptions</label>
                    <p class="field-description" id="declareDesc">What assumptions or constraints are you working with? What might influence the analysis?</p>
                    <textarea id="declare" placeholder="Example: Assuming access to 2 years of customer data, that behavior patterns are consistent, budget constraints limit solutions" oninput="autoSave()"></textarea>
                </div>

                <div class="input-group">
                    <label for="explain"><span class="ladder-letter">E</span>EXPLAIN - Help Needed</label>
                    <p class="field-description" id="explainDesc">What specific assistance do you need? Where are the gaps in your approach?</p>
                    <textarea id="explain" placeholder="Example: Need help identifying leading indicators of churn, statistical methods for small sample sizes, implementation roadmap" oninput="autoSave()"></textarea>
                </div>

                <div class="input-group">
                    <label for="request"><span class="ladder-letter">R</span>REQUEST - Specific Deliverables</label>
                    <p class="field-description" id="requestDesc">What specific outputs, formats, or deliverables do you want? Be explicit about structure and detail level.</p>
                    <textarea id="request" placeholder="Example: (1) Ranked list of churn predictors with statistical significance, (2) Segmentation framework with intervention strategies, (3) 90-day implementation plan with KPIs" oninput="autoSave()"></textarea>
                </div>

                <div class="action-buttons">
                    <button class="generate-btn" onclick="generatePrompt()">Generate Prompt</button>
                </div>
            </div>

            <div class="output-panel">
                <div class="prompt-output" id="promptTab">
                    <button class="copy-btn" onclick="copyPrompt()">Copy to AI</button>
                    <div id="promptText">Your LADDER prompt will appear here...</div>
                </div>
                
                <div id="promptQuality"></div>

                <div class="tips">
                    <h4>ðŸ’¡ How to Use Your Prompt</h4>
                    <ol style="margin-left: 20px; margin-top: 10px;">
                        <li>Generate your LADDER prompt using the button</li>
                        <li>Click "Copy to AI" to copy the prompt</li>
                        <li>Paste into your preferred AI tool:
                            <ul style="margin-left: 20px; margin-top: 5px;">
                                <li>Claude.ai</li>
                                <li>ChatGPT</li>
                                <li>Gemini</li>
                                <li>Perplexity</li>
                                <li>Any other AI assistant</li>
                            </ul>
                        </li>
                        <li>Review and iterate on the AI's response</li>
                    </ol>
                    
                    <h4 style="margin-top: 20px;">ðŸ’¡ Tips for Better Results</h4>
                    <ul>
                        <li><strong>Be Specific:</strong> Include numbers, dates, and concrete details</li>
                        <li><strong>Add Context:</strong> Mention your industry constraints and opportunities</li>
                        <li><strong>State Assumptions:</strong> Make your beliefs explicit for better AI responses</li>
                        <li><strong>Clear Requests:</strong> Define exactly what deliverables you need</li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="footer">
            Copyright Chock LLC 2025
            <a href="https://www.linkedin.com/in/erik-kiaer" target="_blank">LinkedIn</a>
        </div>
    </div>

    <script>
        // Global state
        let currentMode = 'research';
        let sessionData = {
            teamName: '',
            industry: '',
            currentPhase: 'goal',
            completedPhases: [],
            responses: {},
            researchData: {
                lead: '',
                anchor: '',
                detail: '',
                declare: '',
                explain: '',
                request: ''
            }
        };

        const researchPlaceholders = {
            lead: "Example: Analyze customer churn patterns to reduce attrition by 25% in Q2 2025",
            anchor: "Example: Current churn rate is 18% monthly, industry average is 12%, recent survey shows pricing concerns",
            detail: "Example: Planning to use cohort analysis combined with predictive modeling to identify at-risk segments",
            declare: "Example: Assuming access to 2 years of customer data, that behavior patterns are consistent, budget constraints limit solutions",
            explain: "Example: Need help identifying leading indicators of churn, statistical methods for small sample sizes, implementation roadmap",
            request: "Example: (1) Ranked list of churn predictors with statistical significance, (2) Segmentation framework with intervention strategies, (3) 90-day implementation plan with KPIs"
        };

        const workshopPlaceholders = {
            lead: "What specific outcome are you trying to achieve?",
            anchor: "What facts, trends, or current state information is relevant?",
            detail: "What logic or reasoning led you to this approach?",
            declare: "What assumptions are you making?",
            explain: "What type of assistance do you need?",
            request: "What specific outputs do you want?"
        };

        const phaseTemplates = {
            goal: {
                lead: "Generate breakthrough innovation goals for [INDUSTRY] achievable by December 2027",
                anchor: "Current state: [current industry metrics], Recent disruptions: [3-5 examples], Technology readiness: [emerging technologies], Market context: [local advantages/challenges]",
                detail: "Reasoning: Breakthrough goals typically combine 2-3 existing trends, create 10x improvements in key metrics, or fundamentally alter value chains. Innovations succeed through sustainability focus, strong institutions, and cross-sector collaboration.",
                declare: "Assumptions: Technology adoption will accelerate post-2024, regulatory frameworks will adapt to innovation, customers will pay premiums for sustainability, current advantages (trust, education, resources) remain relevant",
                explain: "Need goals that are audacious yet grounded in emerging possibilities, leveraging organizational strengths",
                request: "5 specific goals with format 'By December 2027, [industry] will achieve [specific outcome] resulting in [measurable impact] by leveraging [specific advantage]'"
            },
            assumptions: {
                lead: "Identify critical assumptions underlying this goal: '[TEAM GOAL]'",
                anchor: "Goal context: [team's goal statement], Industry dynamics: [current challenges], Historical patterns: [similar innovation attempts], Cross-industry examples: [analogous breakthroughs in other sectors]",
                detail: "Reasoning: Critical assumptions span customer behavior, technology readiness, market dynamics, competitive response, regulatory environment, organizational capabilities, and ecosystem support. Teams often miss assumptions outside their expertise or underestimate interconnected dependencies.",
                declare: "Assumptions: Teams may have industry blind spots, cognitive biases toward familiar solutions, and limited visibility into other sector patterns. Context includes specific regulatory, cultural, and market factors.",
                explain: "Need comprehensive assumption mapping revealing both obvious and hidden dependencies, with particular attention to cross-industry learnings",
                request: "(1) 15-20 testable assumptions categorized by type, (2) Dependency map showing assumption relationships, (3) 3 historical examples where similar assumptions in other industries proved false, (4) 3 specific assumptions to consider"
            },
            pathways: {
                lead: "Model pathways from today to achieving '[TEAM GOAL]' by December 2027",
                anchor: "Current state: [industry baseline], Critical assumptions: [team's top 5], Resource constraints: [realistic limitations], Ecosystem: [available support, partnerships, funding]",
                detail: "Reasoning: Successful innovation pathways require assumption validation sequences, milestone achievement, setback recovery, and pivot capabilities. Innovations benefit from institutional support, cross-sector collaboration, and sustainability mandates.",
                declare: "Assumptions: Multiple pathways exist, early assumptions validation enables later possibilities, external events will require adaptations, ecosystem provides unique advantages and constraints",
                explain: "Need realistic pathway models accounting for uncertainty, learning, and innovation ecosystem dynamics",
                request: "(1) 3 distinct pathways showing different assumption outcomes, (2) Critical decision points with pivot criteria, (3) Specific milestones and support mechanisms, (4) Early warning signals for path adjustments"
            }
        };

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            loadSessionData();
            setupEventListeners();
            switchMode('research'); // Start in research mode
        });

        function switchMode(mode) {
            currentMode = mode;
            
            // Update UI buttons
            document.querySelectorAll('.mode-btn').forEach(btn => btn.classList.remove('active'));
            document.querySelector(`[onclick="switchMode('${mode}')"]`).classList.add('active');
            
            // Update descriptions
            document.getElementById('researchDesc').classList.toggle('active', mode === 'research');
            document.getElementById('workshopDesc').classList.toggle('active', mode === 'workshop');
            
            // Update body class for styling
            document.body.classList.toggle('research-mode', mode === 'research');
            
            // Show/hide workshop-specific elements
            const isWorkshop = mode === 'workshop';
            document.getElementById('sessionProgress').style.display = isWorkshop ? 'block' : 'none';
            document.getElementById('phaseSelector').style.display = isWorkshop ? 'block' : 'none';
            
            // Update labels and placeholders
            if (mode === 'research') {
                document.getElementById('contextTitle').textContent = 'Context Information';
                document.getElementById('contextLabel1').textContent = 'Project/Team Name';
                document.getElementById('teamName').placeholder = 'e.g., Q1 Market Analysis';
                document.getElementById('contextLabel2').textContent = 'Domain/Industry';
                
                // Load research data or clear fields
                if (sessionData.researchData) {
                    document.getElementById('lead').value = sessionData.researchData.lead || '';
                    document.getElementById('anchor').value = sessionData.researchData.anchor || '';
                    document.getElementById('detail').value = sessionData.researchData.detail || '';
                    document.getElementById('declare').value = sessionData.researchData.declare || '';
                    document.getElementById('explain').value = sessionData.researchData.explain || '';
                    document.getElementById('request').value = sessionData.researchData.request || '';
                }
                
                // Update placeholders
                Object.keys(researchPlaceholders).forEach(key => {
                    document.getElementById(key).placeholder = researchPlaceholders[key];
                });
            } else {
                document.getElementById('contextTitle').textContent = 'Team Information';
                document.getElementById('contextLabel1').textContent = 'Team Name';
                document.getElementById('teamName').placeholder = 'e.g., Team Alpha';
                document.getElementById('contextLabel2').textContent = 'Primary Industry';
                
                // Update placeholders
                Object.keys(workshopPlaceholders).forEach(key => {
                    document.getElementById(key).placeholder = workshopPlaceholders[key];
                });
                
                // Load workshop phase template
                loadPhaseTemplate(sessionData.currentPhase || 'goal');
                updateProgress();
            }
        }

        function setupEventListeners() {
            document.querySelectorAll('.phase-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const phase = this.dataset.phase;
                    const step = parseInt(this.dataset.step);
                    
                    // Save current phase data before switching
                    saveCurrentPhaseData();
                    
                    // Update UI
                    document.querySelectorAll('.phase-btn').forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    
                    // Load new phase
                    sessionData.currentPhase = phase;
                    loadPhaseTemplate(phase);
                    updateProgress();
                    saveSessionData();
                });
            });
        }

        function saveTeamInfo() {
            sessionData.teamName = document.getElementById('teamName').value;
            sessionData.industry = document.getElementById('industry').value;
            
            if (sessionData.teamName && sessionData.industry) {
                document.getElementById('teamSetup').classList.add('completed');
            }
            
            saveSessionData();
            updateProgress();
        }

        function loadPhaseTemplate(phase) {
            const template = phaseTemplates[phase];
            if (template) {
                // Substitute industry if selected
                const industry = sessionData.industry || '[INDUSTRY]';
                
                document.getElementById('lead').value = template.lead.replace(/\[INDUSTRY\]/g, industry);
                document.getElementById('anchor').value = template.anchor;
                document.getElementById('detail').value = template.detail;
                document.getElementById('declare').value = template.declare;
                document.getElementById('explain').value = template.explain;
                document.getElementById('request').value = template.request;
            }
            
            // Load saved data for this phase if it exists
            const savedData = sessionData.responses[phase];
            if (savedData && savedData.prompt) {
                const promptData = savedData.prompt;
                document.getElementById('lead').value = promptData.lead || document.getElementById('lead').value;
                document.getElementById('anchor').value = promptData.anchor || document.getElementById('anchor').value;
                document.getElementById('detail').value = promptData.detail || document.getElementById('detail').value;
                document.getElementById('declare').value = promptData.declare || document.getElementById('declare').value;
                document.getElementById('explain').value = promptData.explain || document.getElementById('explain').value;
                document.getElementById('request').value = promptData.request || document.getElementById('request').value;
            }
        }

        function saveCurrentPhaseData() {
            if (currentMode === 'research') {
                // Save research mode data
                sessionData.researchData = {
                    lead: document.getElementById('lead').value,
                    anchor: document.getElementById('anchor').value,
                    detail: document.getElementById('detail').value,
                    declare: document.getElementById('declare').value,
                    explain: document.getElementById('explain').value,
                    request: document.getElementById('request').value
                };
            } else {
                // Save workshop mode data
                const currentPhase = sessionData.currentPhase;
                if (!sessionData.responses[currentPhase]) {
                    sessionData.responses[currentPhase] = {};
                }
                
                sessionData.responses[currentPhase].prompt = {
                    lead: document.getElementById('lead').value,
                    anchor: document.getElementById('anchor').value,
                    detail: document.getElementById('detail').value,
                    declare: document.getElementById('declare').value,
                    explain: document.getElementById('explain').value,
                    request: document.getElementById('request').value
                };
            }
        }

        function autoSave() {
            saveCurrentPhaseData();
            saveSessionData();
            assessPromptQuality();
        }

        function connectClaude() {
            const apiKey = document.getElementById('apiKey').value.trim();
            if (apiKey.startsWith('sk-ant-api')) {
                claudeApiKey = apiKey;
                document.getElementById('apiSetup').classList.add('connected');
                document.getElementById('apiSetup').innerHTML = '<strong>âœ… Claude Connected</strong><p>Ready to send prompts directly to Claude AI</p>';
                document.getElementById('claudeBtn').disabled = false;
            } else {
                alert('Please enter a valid Claude API key (starts with sk-ant-api)');
            }
        }

        function saveTeamInfo() {
            sessionData.teamName = document.getElementById('teamName').value;
            sessionData.industry = document.getElementById('industry').value;
            
            if (sessionData.teamName && sessionData.industry) {
                document.getElementById('teamSetup').classList.add('completed');
            }
            
            saveSessionData();
            updateProgress();
        }

        function loadPhaseTemplate(phase) {
            const template = phaseTemplates[phase];
            if (template) {
                // Substitute industry if selected
                const industry = sessionData.industry || '[INDUSTRY]';
                
                document.getElementById('lead').value = template.lead.replace(/\[INDUSTRY\]/g, industry);
                document.getElementById('anchor').value = template.anchor;
                document.getElementById('detail').value = template.detail;
                document.getElementById('declare').value = template.declare;
                document.getElementById('explain').value = template.explain;
                document.getElementById('request').value = template.request;
            }
            
            // Load saved data for this phase if it exists
            const savedData = sessionData.responses[phase];
            if (savedData && savedData.prompt) {
                const promptData = savedData.prompt;
                document.getElementById('lead').value = promptData.lead || document.getElementById('lead').value;
                document.getElementById('anchor').value = promptData.anchor || document.getElementById('anchor').value;
                document.getElementById('detail').value = promptData.detail || document.getElementById('detail').value;
                document.getElementById('declare').value = promptData.declare || document.getElementById('declare').value;
                document.getElementById('explain').value = promptData.explain || document.getElementById('explain').value;
                document.getElementById('request').value = promptData.request || document.getElementById('request').value;
            }
        }

        function saveCurrentPhaseData() {
            const currentPhase = sessionData.currentPhase;
            if (!sessionData.responses[currentPhase]) {
                sessionData.responses[currentPhase] = {};
            }
            
            sessionData.responses[currentPhase].prompt = {
                lead: document.getElementById('lead').value,
                anchor: document.getElementById('anchor').value,
                detail: document.getElementById('detail').value,
                declare: document.getElementById('declare').value,
                explain: document.getElementById('explain').value,
                request: document.getElementById('request').value
            };
        }

        function autoSave() {
            saveCurrentPhaseData();
            saveSessionData();
            assessPromptQuality();
        }

        function generatePrompt() {
            const teamName = sessionData.teamName || '[TEAM/PROJECT NAME]';
            const industry = sessionData.industry || '[DOMAIN]';
            const lead = document.getElementById('lead').value;
            const anchor = document.getElementById('anchor').value;
            const detail = document.getElementById('detail').value;
            const declare = document.getElementById('declare').value;
            const explain = document.getElementById('explain').value;
            const request = document.getElementById('request').value;

            let contextLine = '';
            if (currentMode === 'workshop') {
                contextLine = `TEAM: ${teamName}
INDUSTRY: ${industry.toUpperCase()}
PHASE: ${sessionData.currentPhase.toUpperCase()}`;
            } else {
                contextLine = `PROJECT: ${teamName}
DOMAIN: ${industry.toUpperCase()}
TYPE: RESEARCH ANALYSIS`;
            }

            const prompt = `${contextLine}

LEAD: ${lead}

ANCHOR: ${anchor}

DETAIL: ${detail}

DECLARE: ${declare}

EXPLAIN: ${explain}

REQUEST: ${request}

---
Generated by LADDER Prompt Builder | Chock`;

            document.getElementById('promptText').textContent = prompt;
            
            // Save generated prompt
            saveCurrentPhaseData();
            
            if (currentMode === 'workshop') {
                sessionData.responses[sessionData.currentPhase].generatedPrompt = prompt;
                
                // Mark phase as completed
                if (!sessionData.completedPhases.includes(sessionData.currentPhase)) {
                    sessionData.completedPhases.push(sessionData.currentPhase);
                    updateProgress();
                }
            }
            
            saveSessionData();
            assessPromptQuality();
        }

        async function sendToClaude() {
            if (!claudeApiKey) {
                alert('Please connect to Claude first');
                return;
            }

            const prompt = document.getElementById('promptText').textContent;
            if (!prompt || prompt === 'Your LADDER prompt will appear here...') {
                alert('Please generate a prompt first');
                return;
            }

            // Show loading state
            document.getElementById('claudeResponseText').innerHTML = '<div class="loading">ðŸ¤– Claude is thinking...</div>';
            showTab('response');

            try {
                const response = await fetch('https://api.anthropic.com/v1/messages', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'x-api-key': claudeApiKey,
                        'anthropic-version': '2023-06-01'
                    },
                    body: JSON.stringify({
                        model: 'claude-3-sonnet-20240229',
                        max_tokens: 2000,
                        messages: [{
                            role: 'user',
                            content: prompt
                        }]
                    })
                });

                if (!response.ok) {
                    throw new Error(`API Error: ${response.status}`);
                }

                const data = await response.json();
                const claudeResponse = data.content[0].text;
                
                document.getElementById('claudeResponseText').textContent = claudeResponse;
                
                // Save response
                sessionData.responses[sessionData.currentPhase].claudeResponse = claudeResponse;
                
                // Mark phase as completed
                if (!sessionData.completedPhases.includes(sessionData.currentPhase)) {
                    sessionData.completedPhases.push(sessionData.currentPhase);
                    updateProgress();
                }
                
                saveSessionData();

            } catch (error) {
                document.getElementById('claudeResponseText').textContent = `Error: ${error.message}\n\nPlease check your API key and try again.`;
            }
        }

        function showTab(tab) {
            document.querySelectorAll('.response-tab').forEach(t => t.classList.remove('active'));
            document.querySelector(`[onclick="showTab('${tab}')"]`).classList.add('active');
            
            if (tab === 'prompt') {
                document.getElementById('promptTab').style.display = 'block';
                document.getElementById('responseTab').style.display = 'none';
            } else {
                document.getElementById('promptTab').style.display = 'none';
                document.getElementById('responseTab').style.display = 'block';
            }
        }

        function copyPrompt() {
            const text = document.getElementById('promptText').textContent;
            if (text === 'Your LADDER prompt will appear here...') {
                alert('Please generate a prompt first');
                return;
            }
            
            navigator.clipboard.writeText(text).then(() => {
                const btn = document.querySelector('.copy-btn');
                const originalText = btn.textContent;
                btn.textContent = 'âœ“ Copied!';
                btn.style.background = '#4caf50';
                setTimeout(() => {
                    btn.textContent = originalText;
                    btn.style.background = '#000000';
                }, 2000);
            }).catch(err => {
                console.error('Failed to copy:', err);
                alert('Failed to copy. Please select and copy manually.');
            });
        }

        function copyResponse() {
            const text = document.getElementById('claudeResponseText').textContent;
            navigator.clipboard.writeText(text).then(() => {
                const btn = document.querySelector('.claude-response .copy-btn');
                const originalText = btn.textContent;
                btn.textContent = 'Copied!';
                setTimeout(() => btn.textContent = originalText, 2000);
            }).catch(err => {
                console.error('Failed to copy:', err);
                alert('Failed to copy. Please select and copy manually.');
            });
        }

        function assessPromptQuality() {
            const lead = document.getElementById('lead').value;
            const anchor = document.getElementById('anchor').value;
            const detail = document.getElementById('detail').value;
            const declare = document.getElementById('declare').value;
            const explain = document.getElementById('explain').value;
            const request = document.getElementById('request').value;

            let score = 0;
            let feedback = [];

            // Check each field
            if (lead.length > 50) score += 1;
            if (anchor.length > 100) score += 1;
            if (detail.length > 100) score += 1;
            if (declare.length > 50) score += 1;
            if (explain.length > 50) score += 1;
            if (request.length > 50) score += 1;

            // Check for specifics
            if (lead.match(/\d+/) || lead.includes('specific')) score += 1;
            if (anchor.match(/\d+|%|data|trend/i)) score += 1;
            if (declare.includes('assume') || declare.includes('believe')) score += 1;
            if (request.match(/\d+|list|specific|format/i)) score += 1;

            const qualityDiv = document.getElementById('promptQuality');
            if (score >= 8) {
                qualityDiv.className = 'prompt-quality quality-good';
                qualityDiv.innerHTML = 'âœ… Excellent prompt quality - ready for high-quality AI responses';
            } else if (score >= 5) {
                qualityDiv.className = 'prompt-quality quality-fair';
                qualityDiv.innerHTML = 'âš ï¸ Good prompt quality - consider adding more specific details';
            } else if (score > 0) {
                qualityDiv.className = 'prompt-quality quality-poor';
                qualityDiv.innerHTML = 'âŒ Needs improvement - add more context and specific requirements';
            } else {
                qualityDiv.innerHTML = '';
            }
        }

        function updateProgress() {
            const totalPhases = 3;
            const completedCount = sessionData.completedPhases.length;
            const progress = (completedCount / totalPhases) * 100;

            document.getElementById('progressFill').style.width = progress + '%';

            // Update step indicators
            for (let i = 1; i <= 3; i++) {
                const step = document.getElementById(`step${i}`);
                step.classList.remove('completed', 'current', 'upcoming');
                
                if (sessionData.completedPhases.includes(getPhaseByStep(i))) {
                    step.classList.add('completed');
                } else if (sessionData.currentPhase === getPhaseByStep(i)) {
                    step.classList.add('current');
                } else {
                    step.classList.add('upcoming');
                }
            }

            // Update phase buttons
            document.querySelectorAll('.phase-btn').forEach(btn => {
                const phase = btn.dataset.phase;
                if (sessionData.completedPhases.includes(phase)) {
                    btn.classList.add('completed');
                } else {
                    btn.classList.remove('completed');
                }
            });
        }

        function getPhaseByStep(step) {
            switch(step) {
                case 1: return 'goal';
                case 2: return 'assumptions';
                case 3: return 'pathways';
                default: return 'custom';
            }
        }

        function saveSessionData() {
            try {
                localStorage.setItem('ladderSessionData', JSON.stringify(sessionData));
            } catch (e) {
                console.warn('Could not save to localStorage:', e);
            }
        }

        function loadSessionData() {
            try {
                const saved = localStorage.getItem('ladderSessionData');
                if (saved) {
                    sessionData = JSON.parse(saved);
                    
                    // Restore team info
                    if (sessionData.teamName) {
                        document.getElementById('teamName').value = sessionData.teamName;
                    }
                    if (sessionData.industry) {
                        document.getElementById('industry').value = sessionData.industry;
                    }
                    
                    // Check if team setup is complete
                    if (sessionData.teamName && sessionData.industry) {
                        document.getElementById('teamSetup').classList.add('completed');
                    }
                }
            } catch (e) {
                console.warn('Could not load from localStorage:', e);
            }
        }
    </script>
</body>
</html>
                